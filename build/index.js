(()=>{"use strict";const e=window.wp.element;var t;const{__,getLocaleData:a}=wp.i18n,{PluginDocumentSettingPanel:l}=wp.editPost,{compose:n}=wp.compose,{withSelect:c,withDispatch:i}=wp.data,{ToggleControl:r,DateTimePicker:s,PanelRow:o,Button:p,Dropdown:d,TextControl:_}=wp.components,u=null!==(t=a()[""].lang)&&void 0!==t?t:"en-us",m=n([c((e=>({postMeta:e("core/editor").getEditedPostAttribute("meta"),postType:e("core/editor").getCurrentPostType()}))),i((e=>({setPostMeta(t){e("core/editor").editPost({meta:t})}})))])((t=>{let{postType:a,postMeta:n,setPostMeta:c}=t;return!piecalGbVars.isWooActive&&!piecalGbVars.isEddActive||"product"!=a&&"download"!=a?piecalGbVars.explicitAllowedPostTypes&&piecalGbVars.explicitAllowedPostTypes.length>0&&!piecalGbVars.explicitAllowedPostTypes.includes(a)?null:(0,e.createElement)(l,{title:__("Calendar","piecal"),initialOpen:"true"},(0,e.createElement)(o,null,(0,e.createElement)(r,{label:__("Show On Calendar","piecal"),onChange:e=>c({_piecal_is_event:e}),checked:n._piecal_is_event})),(0,e.createElement)(o,null,n._piecal_is_event&&(0,e.createElement)(r,{label:__("All Day Event","piecal"),onChange:e=>c({_piecal_is_allday:e}),checked:n._piecal_is_allday})),n._piecal_is_event&&(0,e.createElement)(o,null,(0,e.createElement)(d,{className:"piecal-gb-dropdown-container",contentClassName:"piecal-gb-dropdown-content",position:"bottom right",renderToggle:t=>{let{isOpen:a,onToggle:l}=t;return(0,e.createElement)(p,{variant:"primary",onClick:l,"aria-expanded":a},""==n._piecal_start_date||null==n._piecal_start_date?(0,e.createElement)("span",null,(0,e.createElement)("span",{class:"dashicons dashicons-calendar"}),"  ",__("Start Date","piecal")):(0,e.createElement)("span",null,(0,e.createElement)("span",{class:"dashicons dashicons-yes"}),"  ",__("Start Date","piecal")))},renderContent:()=>(0,e.createElement)("div",null,(0,e.createElement)(s,{currentDate:n._piecal_start_date,is12Hour:!0,label:__("Start Date","piecal"),value:n._piecal_start_date,onChange:e=>c({_piecal_start_date:e})}),(0,e.createElement)(o,null,(0,e.createElement)(p,{variant:"link",className:"piecal-clear-date-button",isDestructive:"true",onClick:e=>c({_piecal_start_date:null})},__("Clear","piecal"))))}),(0,e.createElement)(d,{className:"piecal-gb-dropdown-container",contentClassName:"piecal-gb-dropdown-content",position:"bottom right",renderToggle:t=>{let{isOpen:a,onToggle:l}=t;return(0,e.createElement)(p,{variant:"primary",onClick:l,"aria-expanded":a},""==n._piecal_end_date||null==n._piecal_end_date?(0,e.createElement)("span",null,(0,e.createElement)("span",{class:"dashicons dashicons-calendar"}),"  ",__("End Date","piecal")):(0,e.createElement)("span",null,(0,e.createElement)("span",{class:"dashicons dashicons-yes"}),"  ",__("End Date","piecal")))},renderContent:()=>(0,e.createElement)("div",null,(0,e.createElement)(s,{currentDate:n._piecal_end_date,is12Hour:!0,label:__("End Date","piecal"),value:n._piecal_end_date,onChange:e=>c({_piecal_end_date:e})}),(0,e.createElement)(o,null,(0,e.createElement)(p,{variant:"link",className:"piecal-clear-date-button",isDestructive:"true",onClick:e=>c({_piecal_end_date:null})},__("Clear","piecal"))))})),""!=n._piecal_start_date&&null!=n._piecal_start_date&&(0,e.createElement)(o,null,(0,e.createElement)("p",null,__("Starts on ","piecal")+new Date(n._piecal_start_date).toLocaleDateString(u.replace("_","-"),{weekday:"long",year:"numeric",month:"short",day:"numeric"}))),""!=n._piecal_end_date&&null!=n._piecal_end_date&&(0,e.createElement)(o,null,(0,e.createElement)("p",null,__("Ends on ","piecal")+new Date(n._piecal_end_date).toLocaleDateString(u.replace("_","-"),{weekday:"long",year:"numeric",month:"short",day:"numeric"})))):null})),{registerPlugin:E}=wp.plugins;E("piecal-postmeta-plugin",{render:()=>(0,e.createElement)(m,null)})})();